# Alterlite
<a href='https://play.google.com/store/apps/details?id=com.enxy.noolite&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1'><img alt='Get it on Google Play' src='https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png' height=65px/></a> &nbsp;&nbsp;  
&nbsp;&nbsp;&nbsp;![GitHub](https://img.shields.io/github/license/enxy0/Noolite?style=for-the-badge)

**Alterlite** — Android-клиент для управления освещением через ethernet-шлюз nooLite PR1132.
Альтернатива официальному приложению производителя, с упором на простоту и гибкость сценариев.

**Ключевые возможности:**

- Сценарии: запись/воспроизведение пользовательских сценариев;
- Избранное: быстрый доступ к часто используемым группам;
- Локальная кэш-база для офлайн-режима (Room);
- Современный UI на Jetpack Compose + Material3;
- Плавные анимации и продуманный UX для мобильных устройств.

---

## Скриншоты

|                                                                                                          Настройка |                                                  Главный экран                                                  |                                                       Группа                                                       |                                                     Сценарии                                                      |
|-------------------------------------------------------------------------------------------------------------------:|:---------------------------------------------------------------------------------------------------------------:|:------------------------------------------------------------------------------------------------------------------:|:-----------------------------------------------------------------------------------------------------------------:|
| <img src="https://raw.githubusercontent.com/enxy0/Noolite/master/github/images/initial.jpg?raw=true" width="240"/> | <img src="https://raw.githubusercontent.com/enxy0/Noolite/master/github/images/home.jpg?raw=true" width="240"/> | <img src="https://raw.githubusercontent.com/enxy0/Noolite/master/github/images/details.jpg?raw=true" width="240"/> | <img src="https://raw.githubusercontent.com/enxy0/Noolite/master/github/images/script.jpg?raw=true" width="240"/> |

---

## Архитектура

- UI: Jetpack Compose + Material3;
- Навигация/композиция модулей: Decompose;
- Состояние: Orbit MVI (unidirectional flow);
- DI: Koin;
- Сеть: Retrofit + OkHttp + kotlinx.serialization;
- Persistence: Room;
- Concurrency: Kotlinx Coroutines.

---

## Сборка и запуск

**Требования:**

- JDK 17+ (или версия, совместимая с AGP 8.13)
- Android Studio / Gradle wrapper из репозитория

**Сборка:**

```bash
# собрать debug apk
./gradlew assembleDebug

# собрать release apk
./gradlew assembleRelease

# создать release AAB (bundle)
./gradlew bundleRelease
```

## Noolite PR1132 API (основные команды)
| Аргумент | Описание | Значение | Действие |  
|--|--|--|--|  
| ch | Адрес канала | 0..31 | Адрес канала, к которому будет применяться какая-либо команда.. |  
| cmd | Команда | 0 | Выключить (нагрузку) |  
| cmd | Команда | 1 | Запустить плавное понижение яркости|  
| cmd | Команда | 2 | Включить (нагрузку) |  
| cmd | Команда | 3 | Запустить плавное повышение яркости |  
| cmd | Команда | 4 | Включить или выключить нагрузку (переключатель состояния)|  
| cmd | Команда | 5 | Запустить плавное изменение яркости в обратном направлении  
| cmd | Команда | 7 | Запустить записанный сценарий|  
| cmd | Команда | 8 | Записать сценарий|  
| cmd | Команда | 9 | Отвязать выбранный канал от сервера|  
| cmd | Команда | 10 | Остановить регулировку |  
| cmd | Команда | 15 | Привязать выбранный канал к серверу|  
| cmd | Команда | 16 | Включить плавное переливание цвета (выключается командой cmd=10)|  
| cmd | Команда | 17 | Сменить цвет |  
| cmd | Команда | 18 | Сменить режим работы|  
| cmd | Команда | 19 | Сменить скорость эффекта в режиме работы|  
| br | Яркость | 0..100 (в %) | Абсолютная яркость. Использовать ее только с командой cmd=6. Чтобы изменить яркость на выбранном канале используйте следующие аргументы: ch, cmd и br (`/api.htm?ch=0&cmd=6&br=50`).<br>**Примечание автора**: при смене подсветки канала первого типа (type=1), нестабильно работает изменение яркости `/api.htm?ch=0&cmd=6&br=50`, поэтому рекомендую использовать данное сочетание аргументов: `/api.htm?ch=0&cmd=6&fm=3&br=50` (взято из ориг. приложения Noolite)|  
| fm | Формат | 0..255 | При передаче команды cmd=6 - значение fm=1 (яркость – байт данных 0) или fm=3 (яркость на каждый канал независимо - байт данных 0, 1, 2).<br>Аргумент «fm» необходим только при передаче данных вместе с аргументами («d0», «d1»,«d2»,«d3»). |

**Примеры:**

1. `http://192.168.0.168/api.htm?ch=0&cmd=15` (Привязать канал №1 к серверу)
2. `http://192.168.0.168/api.htm?ch=2&cmd=2` (Включить нагрузку на канале №3)
3. `http://192.168.0.168/api.htm?ch=2&cmd=0` (Выключить нагрузку на канале №3)
4. `http://192.168.0.168/api.htm?ch=2&cmd=4` (Изменить состояние нагрузки на канале №3)
5. `http://192.168.0.168/api.htm?ch=2&cmd=6&fm=3&br=50` (Установить яркость подсветки в 50% на канале №3)

Полную **документацию** по ethernet-шлюзу PR1132 **можно найти тут**: [PR1132.pdf](https://github.com/enxy0/Noolite/blob/master/github/PR1132.pdf)
